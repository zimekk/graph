{"version":3,"file":"383.js","mappings":"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","sources":["webpack://@dev/web/./src/containers/Graph.module.scss?20b8","webpack://@dev/web/./src/containers/Graph.tsx","webpack://@dev/web/./src/containers/Graph.module.scss"],"sourcesContent":["\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Graph.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Graph.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { forwardRef, useMemo, useRef, useState, useEffect } from \"react\";\nimport {\n  pluckCurrentTargetValue,\n  useObservableCallback,\n  useObservableState,\n  useSubscription,\n} from \"observable-hooks\";\nimport { timer } from \"rxjs\";\nimport { mapTo, switchMap } from \"rxjs/operators\";\nimport ForceGraph2D from \"react-force-graph-2d\";\nimport styles from \"./Graph.module.scss\";\n\n// https://codesandbox.io/s/github/crimx/observable-hooks/tree/master/examples/typeahead?file=/src/custom-input.tsx\nconst Editor = forwardRef(function Editor(\n  { children: value, onChange, ...rest },\n  ref\n) {\n  const [onTextChange, textChange$] = useObservableCallback<\n    string,\n    React.FormEvent<HTMLTextAreaElement>\n  >(pluckCurrentTargetValue);\n\n  useSubscription(textChange$, onChange);\n\n  return (\n    <div className={styles.Editor}>\n      <textarea ref={ref} value={value} onChange={onTextChange} {...rest} />\n    </div>\n  );\n});\n\n// https://medium.com/@jeffbutsch/using-d3-in-react-with-hooks-4a6c61f1d102\nexport function Graph({ data }) {\n  return (\n    <ForceGraph2D\n      graphData={data}\n      width={400}\n      height={400}\n      nodeAutoColorBy=\"group\"\n      nodeCanvasObject={(node, ctx, globalScale) => {\n        const label = node.id;\n        const fontSize = 12 / globalScale;\n        ctx.font = `${fontSize}px Sans-Serif`;\n        const textWidth = ctx.measureText(label).width;\n        const bckgDimensions = [textWidth, fontSize].map(\n          (n) => n + fontSize * 0.2\n        ); // some padding\n\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n        ctx.fillRect(\n          node.x - bckgDimensions[0] / 2,\n          node.y - bckgDimensions[1] / 2,\n          ...bckgDimensions\n        );\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = node.color;\n        ctx.fillText(label, node.x, node.y);\n\n        node.__bckgDimensions = bckgDimensions; // to re-use in nodePointerAreaPaint\n      }}\n      nodePointerAreaPaint={(node, color, ctx) => {\n        ctx.fillStyle = color;\n        const bckgDimensions = node.__bckgDimensions;\n        bckgDimensions &&\n          ctx.fillRect(\n            node.x - bckgDimensions[0] / 2,\n            node.y - bckgDimensions[1] / 2,\n            ...bckgDimensions\n          );\n      }}\n    />\n  );\n}\n\n// https://github.com/vasturiano/react-force-graph/blob/master/example/text-nodes/index-2d.html\nexport default function Section() {\n  const inputRef = useRef(null);\n  const [text, setText] = useState(\n    () =>\n      `Napoleon --> Myriel\nMlle.Baptistine --> Myriel\nMme.Hucheloup --> Enjolras\n`\n  );\n\n  const [parsed, updateText] = useObservableState(\n    (text$) => text$.pipe(switchMap((text) => timer(400).pipe(mapTo(text)))),\n    text\n  );\n\n  const data = useMemo(() => {\n    const { ids, links } = parsed\n      .split(\"\\n\")\n      .map((line) => line.match(/^\\s*(\\S+)\\s*-->\\s*(\\S+)\\s*$/i))\n      .filter(Boolean)\n      .reduce(\n        ({ ids, links }, [_, source, target]) => ({\n          ids: {\n            ...ids,\n            [source]: source,\n            [target]: target,\n          },\n          links: links.concat({\n            source,\n            target,\n          }),\n        }),\n        { ids: {}, links: [] }\n      );\n    return {\n      nodes: Object.keys(ids).map((id) => ({ id })),\n      links,\n    };\n  }, [parsed]);\n\n  useEffect(() => {\n    updateText(text);\n  }, [text]);\n\n  return (\n    <section className={styles.Section}>\n      <h2>Graph</h2>\n      <Graph data={data} />\n      <Editor ref={inputRef} onChange={setText}>\n        {text}\n      </Editor>\n    </section>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".xYdS0IxW8Xrsb30ui_UV{color:blue}.xYdS0IxW8Xrsb30ui_UV svg{height:500px;width:500px;border:1px solid gray}.kVxH4p0dnv12MSmq9uny{display:flex;height:10vh;border:2px solid blue}.kVxH4p0dnv12MSmq9uny textarea{border:0;flex:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/containers/Graph.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,UAAA,CAEA,0BACE,YAAA,CACA,WAAA,CACA,qBAAA,CAIJ,sBACE,YAAA,CACA,WAAA,CACA,qBAAA,CACA,+BACE,QAAA,CACA,MAAA\",\"sourcesContent\":[\".Section {\\n  color: blue;\\n\\n  svg {\\n    height: 500px;\\n    width: 500px;\\n    border: 1px solid gray;\\n  }\\n}\\n\\n.Editor {\\n  display: flex;\\n  height: 10vh;\\n  border: 2px solid blue;\\n  textarea {\\n    border: 0;\\n    flex: 1;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"xYdS0IxW8Xrsb30ui_UV\",\n\t\"Editor\": \"kVxH4p0dnv12MSmq9uny\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","Editor","forwardRef","children","value","onChange","rest","ref","onTextChange","textChange$","useObservableCallback","pluckCurrentTargetValue","useSubscription","className","styles","Graph","data","graphData","width","height","nodeAutoColorBy","nodeCanvasObject","node","ctx","globalScale","label","id","fontSize","font","bckgDimensions","measureText","map","n","fillStyle","fillRect","x","y","textAlign","textBaseline","color","fillText","__bckgDimensions","nodePointerAreaPaint","Section","inputRef","useRef","text","setText","useState","parsed","updateText","useObservableState","text$","pipe","switchMap","timer","mapTo","useMemo","ids","links","split","line","match","filter","Boolean","reduce","_","source","target","concat","nodes","Object","keys","useEffect","___CSS_LOADER_EXPORT___","push","module","locals"],"sourceRoot":""}